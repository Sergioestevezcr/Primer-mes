/* Paleta y tokens */
:root {
  --pink-50: #fff7fb;
  --pink-100: #ffe6f0;
  --pink-200: #ffd1e0;
  --pink-300: #ffb6cf;
  --pink-400: #ff8fb3;
  --pink-500: #ff6b9f;
  --rose-600: #e05084;
  --ink: #392a34;
  --muted: #80627a;
  --card: #ffffffcc;
  --shadow: 0 10px 30px rgba(57, 42, 52, .15);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0
}

body {
  font-family: 'Poppins', sans-serif;
  color: var(--ink);
  background: linear-gradient(180deg, var(--pink-50), var(--pink-100));
  overflow-x: hidden;
  scroll-behavior: smooth
}

/* Corazones de fondo */
.hearts {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 0
}

.heart {
  position: absolute;
  width: 14px;
  height: 14px;
  background: var(--pink-300);
  transform: rotate(45deg);
  opacity: .6;
  animation: float var(--dur) linear infinite
}

.heart:before,
.heart:after {
  content: "";
  position: absolute;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: inherit
}

.heart:before {
  left: -7px
}

.heart:after {
  top: -7px
}

@keyframes float {
  to {
    transform: translateY(-110vh) rotate(45deg)
  }
}

/* Hero */
header.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 10vh 5vw;
  background: radial-gradient(1200px 600px at 50% 0%, var(--pink-100), transparent 70%);
  position: relative;
  z-index: 1
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: .5rem 1rem;
  border-radius: 999px;
  background: var(--card);
  box-shadow: var(--shadow);
  color: var(--muted);
  font-weight: 600;
  margin-bottom: 1rem
}

h1 {
  font-size: clamp(1.8rem, 5vw, 3.5rem);
  margin-bottom: 1rem
}

.sub {
  color: var(--muted);
  font-size: clamp(.9rem, 2vw, 1.1rem);
  max-width: 650px;
  margin: 0 auto 1rem
}

.small {
  font-size: clamp(.85rem, 1.8vw, .95rem);
  color: var(--muted);
  margin-top: .5rem
}

.cta {
  display: flex;
  gap: .6rem;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: .75rem
}

.btn {
  background: var(--pink-500);
  color: #fff;
  border: none;
  padding: .8rem 1.2rem;
  border-radius: .8rem;
  font-weight: 700;
  cursor: pointer;
  box-shadow: var(--shadow)
}

.btn.ghost {
  background: transparent;
  color: var(--rose-600);
  border: 2px solid var(--pink-300)
}

/* Secciones */
section {
  padding: 4rem 1rem;
  text-align: center;
  position: relative;
  z-index: 1
}

.container {
  max-width: 980px;
  margin: 0 auto
}

/* Cards */
.cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem
}

.card {
  background: var(--card);
  border-radius: 1rem;
  padding: 1.2rem;
  box-shadow: var(--shadow);
  flex: 1 1 260px;
  max-width: 300px
}

/* Timeline */
.timeline .moment {
  background: #fff;
  border-radius: 1rem;
  padding: 1rem;
  box-shadow: var(--shadow);
  margin: 1rem auto;
  max-width: 520px;
  text-align: left
}

.date {
  color: var(--rose-600);
  font-weight: 700;
  margin-bottom: .4rem
}

/* Polaroids */
.polaroids {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
  justify-items: center
}

.polaroid {
  background: #fff;
  border-radius: .8rem;
  padding: .6rem .6rem 1rem;
  box-shadow: var(--shadow);
  max-width: 180px;
  transition: transform .2s
}

.polaroid:hover {
  transform: scale(1.03)
}

.polaroid img {
  width: 100%;
  border-radius: .6rem
}

.cap {
  font-size: .85rem;
  color: var(--muted);
  margin-top: .4rem
}

/* Carta */
.letter {
  background: #fff;
  border-radius: 1rem;
  padding: 1.5rem;
  box-shadow: var(--shadow);
  max-width: 700px;
  margin: 0 auto;
  text-align: left;
  line-height: 1.6
}

.letter h3 {
  margin-bottom: .6rem
}

.sig {
  text-align: right;
  color: var(--rose-600);
  font-weight: 700;
  margin-top: .8rem
}

/* Player */
.player {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: .6rem;
  align-items: center;
  background: rgba(255, 255, 255, .65);
  padding: 1rem;
  border-radius: .8rem;
  box-shadow: var(--shadow)
}

audio {
  width: 100%;
  max-width: 320px
}

/* Footer */
footer {
  text-align: center;
  padding: 2rem 1rem;
  color: var(--muted);
  background: #fff0f6
}

/* Responsive */
@media(max-width:768px) {
  .cards {
    flex-direction: column;
    align-items: center
  }

  .letter {
    font-size: .95rem;
    padding: 1rem
  }

  h1 {
    font-size: 2rem
  }

  .polaroid {
    max-width: 140px
  }

  .btn {
    width: 90%;
    max-width: 300px
  }
}

@media(max-width:480px) {
  h1 {
    font-size: 1.6rem
  }

  .sub {
    font-size: .9rem
  }

  .polaroid {
    max-width: 130px
  }

  .letter {
    font-size: .92rem
  }
}

/* Autoplay tip button */
.autoplay-tip {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 50;
  background: var(--pink-500);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: .75rem 1rem;
  box-shadow: var(--shadow);
  font-weight: 700;
  cursor: pointer;
  display: none
}

.autoplay-tip.onscreen {
  display: inline-flex
}

/* =========================
   MODO OSCURO (variables)
========================= */
body.dark {
  --pink-50: #2b1f27;
  --pink-100: #3a2a35;
  --pink-200: #4a3344;
  --pink-300: #7a4a6c;
  --pink-400: #b06e98;
  --pink-500: #ff0059;
  /* acento */
  --rose-600: #ff85b5;
  --ink: #f6ecf3;
  --muted: #ff00bb;
  --card: rgba(22, 16, 20, .5);
}

body.dark {
  background: linear-gradient(180deg, var(--pink-100), #1a1318);
}

body.dark .badge,
body.dark .player {
  background: rgba(255, 255, 255, .08)
}

body.dark .card,
body.dark .timeline .moment,
body.dark .letter {
  background: rgba(255, 255, 255, .06)
}

body.dark footer {
  background: #2a1d26;
  color: var(--muted)
}

body.dark .btn.ghost {
  border-color: var(--pink-400);
  color: var(--rose-600)
}

/* Botón toggle de tema */
.theme-toggle {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 60;
  background: var(--pink-500);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: .6rem 1rem;
  box-shadow: var(--shadow);
  font-weight: 700;
  cursor: pointer;
}

/* Selector de canciones */
.player {
  row-gap: .8rem
}

.select-label {
  font-weight: 700;
  color: var(--muted)
}

.song-select {
  padding: .5rem .8rem;
  border-radius: .6rem;
  border: 1px solid var(--pink-300);
  background: #fff;
  color: #333;
  max-width: 100%;
  box-shadow: var(--shadow);
}

body.dark .song-select {
  background: #2b1f27;
  color: var(--ink);
  border-color: #5d3f54
}

/* Botón flotante autoplay (si no lo tenías) */
.autoplay-tip {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 50;
  background: var(--pink-500);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: .75rem 1rem;
  box-shadow: var(--shadow);
  font-weight: 700;
  cursor: pointer;
  display: none
}

.autoplay-tip.onscreen {
  display: inline-flex
}

/* =========================
   MOODS por canción
   (sobrescriben variables)
========================= */

/* Romántica: rosa pastel cálido */
body.mood-romantica {
  --pink-50: #fff7fb;
  --pink-100: #ffe6f0;
  --pink-200: #ffd1e0;
  --pink-300: #ffb6cf;
  --pink-400: #ff8fb3;
  --pink-500: #ff6b9f;
  --rose-600: #e05084;
}

/* Bachata: melón/durazno alegre */
body.mood-bachata {
  --pink-50: #fff8f2;
  --pink-100: #ffe7d6;
  --pink-200: #ffd3b3;
  --pink-300: #ffb98a;
  --pink-400: #ff9961;
  --pink-500: #ff7d4d;
  --rose-600: #ff6a5e;
}

/* Chill: malva-lila suave */
body.mood-chill {
  --pink-50: #f7f5ff;
  --pink-100: #eee8ff;
  --pink-200: #e0d6ff;
  --pink-300: #c9b7ff;
  --pink-400: #a88cff;
  --pink-500: #8a6bff;
  --rose-600: #7b5ae0;
}

/* Opcional: toque sutil al fondo si hay mood */
body.mood-romantica:not(.dark),
body.mood-bachata:not(.dark),
body.mood-chill:not(.dark) {
  background: linear-gradient(180deg, var(--pink-50), var(--pink-100));
}

/* Si está en oscuro, siguen operando tus tokens de dark + estos tonos */
/* Volumen UI */
.volume {
  display: flex;
  align-items: center;
  gap: .6rem;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: .25rem
}

.volume label {
  font-weight: 700;
  color: var(--muted)
}

#volRange {
  width: 220px;
  accent-color: var(--pink-500);
}

#volPct {
  min-width: 3ch;
  text-align: right;
  color: var(--muted);
  font-weight: 700
}

:root {
  --heart-hue: 345;
}

body.mood-romantica {
  --heart-hue: 345;
}

body.mood-bachata {
  --heart-hue: 20;
}

body.mood-chill {
  --heart-hue: 260;
}

/* color del título principal, usando tu paleta */
.headline {
  color: var(--rose-600);
}

/* o usa #e05084, el que quieras */
/* =========================
   Galería
========================= */
.chips {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
  justify-content: center;
  margin: 0 0 1rem 0;
}

.chip {
  background: var(--card);
  color: var(--ink);
  border: 1px solid var(--pink-300);
  padding: .5rem .9rem;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 700;
  box-shadow: var(--shadow);
}

.chip.is-active {
  background: var(--pink-500);
  color: #fff;
  border-color: transparent
}

.gallery-grid {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}

.gitem {
  background: #fff;
  border-radius: .8rem;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: transform .15s ease, box-shadow .15s ease;
  cursor: pointer;
}

.gitem:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 28px rgba(57, 42, 52, .18)
}

.gitem img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  aspect-ratio: 1/1;
}

.gitem figcaption {
  padding: .55rem .7rem;
  font-size: .9rem;
  color: var(--muted)
}

/* Lightbox */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .75);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  z-index: 100;
  padding: clamp(8px, 2vw, 20px);
  backdrop-filter: blur(2px);
}

.lightbox.hidden {
  display: none
}

.lb-frame {
  max-width: min(92vw, 1100px);
  max-height: min(86vh, 900px);
  display: flex;
  flex-direction: column;
  gap: .5rem;
  align-items: center;
}

.lb-frame img {
  max-width: 100%;
  max-height: calc(86vh - 40px);
  border-radius: 12px;
  box-shadow: var(--shadow);
  background: #fff;
}

.lb-frame figcaption {
  color: #fff;
  text-align: center;
  font-weight: 600
}

.lb-prev,
.lb-next,
.lb-close {
  position: fixed;
  background: rgba(255, 255, 255, .15);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, .35);
  border-radius: 12px;
  padding: .4rem .7rem;
  cursor: pointer;
  font-size: 1.4rem;
  backdrop-filter: blur(2px);
}

.lb-prev {
  left: 1rem
}

.lb-next {
  right: 1rem
}

.lb-close {
  top: 1rem;
  right: 1rem;
  font-size: 1.1rem
}

@media(max-width:640px) {

  .lb-prev,
  .lb-next {
    top: auto;
    bottom: 1.2rem
  }
}

/* Lightbox: el video hereda estilos de imagen */
.lb-frame video {
  max-width: 100%;
  max-height: calc(86vh - 40px);
  border-radius: 12px;
  box-shadow: var(--shadow);
  background: #000;
  /* para que no quede blanco detrás del video */
  display: none;
  /* oculto por defecto, lo muestra JS cuando toque */
}

/* Quitar subrayado a los botones-enlace */
a.btn,
a.btn:link,
a.btn:visited,
a.btn.ghost,
a.btn.ghost:link,
a.btn.ghost:visited {
  text-decoration: none;
}

/* Asegura que tampoco aparezca al pasar el mouse o enfocar */
a.btn:hover,
a.btn:focus,
a.btn.ghost:hover,
a.btn.ghost:focus {
  text-decoration: none;
}

a.btn,
a.btn.ghost {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Chips (filtros) */
.chips {
  display: flex;
  gap: .5rem;
  flex-wrap: wrap;
  justify-content: center;
  margin: 0 0 1rem 0;
}

.chip {
  background: var(--card);
  color: var(--ink);
  border: 1px solid var(--pink-300);
  padding: .5rem .9rem;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 700;
  box-shadow: var(--shadow);
}

.chip.is-active {
  background: var(--pink-500);
  color: #fff;
  border-color: transparent
}

/* Grid */
.gallery-grid {
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}

.gitem {
  background: #fff;
  border-radius: .8rem;
  overflow: hidden;
  box-shadow: var(--shadow);
  transition: transform .15s ease, box-shadow .15s ease;
  cursor: pointer;
}

.gitem:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 28px rgba(57, 42, 52, .18)
}

.gitem img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  aspect-ratio: 1/1;
}

.gitem figcaption {
  padding: .55rem .7rem;
  font-size: .9rem;
  color: var(--muted)
}

/* Lightbox */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .75);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  z-index: 100;
  padding: clamp(8px, 2vw, 20px);
  backdrop-filter: blur(2px);
}

.lightbox.hidden {
  display: none
}

.lb-frame {
  max-width: min(92vw, 1100px);
  max-height: min(86vh, 900px);
  display: flex;
  flex-direction: column;
  gap: .5rem;
  align-items: center;
}

.lb-frame img,
.lb-frame video {
  max-width: 100%;
  max-height: calc(86vh - 40px);
  border-radius: 12px;
  box-shadow: var(--shadow);
}

.lb-frame video {
  background: #000;
  display: none;
}

/* lo alterna JS */
.lb-frame figcaption {
  color: #fff;
  text-align: center;
  font-weight: 600
}

.lb-prev,
.lb-next,
.lb-close {
  position: fixed;
  background: rgba(255, 255, 255, .15);
  color: #fff;
  border: 1px solid rgba(255, 255, 255, .35);
  border-radius: 12px;
  padding: .4rem .7rem;
  cursor: pointer;
  font-size: 1.4rem;
  backdrop-filter: blur(2px);
}

.lb-prev {
  left: 1rem
}

.lb-next {
  right: 1rem
}

.lb-close {
  top: 1rem;
  right: 1rem;
  font-size: 1.1rem
}

@media(max-width:640px) {

  .lb-prev,
  .lb-next {
    top: auto;
    bottom: 1.2rem
  }
}

/* Uploader */
.uploader {
  display: flex;
  gap: .6rem;
  align-items: center;
  justify-content: center;
  margin: 1rem 0;
  flex-wrap: wrap
}

.uploader .uhelp {
  color: var(--muted);
  font-size: .9rem
}